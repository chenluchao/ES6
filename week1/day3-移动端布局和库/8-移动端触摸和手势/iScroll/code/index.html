<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title></title>

		<style type="text/css">
			body {
				margin: 0;
				padding: 0;
			}
			
			ul,
			li {
				list-style: none;
				margin: 0;
				padding: 0;
			}
			
			.navbar {
				width: 100%;
				height: 44px;
				background-color: #e93030;
				font-size: 24px;
				text-align: center;
				line-height: 44px;
			}
			
			.wrapper {
				width: 100%;
				position: absolute;
				top: 44px;
				bottom: 49px;
				/* 核心 */
				overflow: hidden;
			}
			
			.wrapper li {
				width: 100%;
				height: 80px;
				padding: 5px;
				line-height: 70px;
				border-bottom: 1px solid #cacaca;
			}
			
			.tabbar {
				width: 100%;
				height: 49px;
				background-color: #e93030;
				position: absolute;
				bottom: 0;
				font-size: 24px;
				text-align: center;
				line-height: 44px;
			}
		</style>

	</head>

	<body>

		<div class="navbar">
			navbar
		</div>

		<div class="wrapper">
			<ul>
				<li>1今天我以为是我们的开始, 却最终是我们的结束</li>
				<li>2今天我以为是我们的开始, 却最终是我们的结束</li>
				<li>3今天我以为是我们的开始, 却最终是我们的结束</li>
				<li>4今天我以为是我们的开始, 却最终是我们的结束</li>
				<li>5今天我以为是我们的开始, 却最终是我们的结束</li>
				<li>今天我以为是我们的开始, 却最终是我们的结束</li>
				<li>今天我以为是我们的开始, 却最终是我们的结束</li>
				<li>今天我以为是我们的开始, 却最终是我们的结束</li>
			</ul>
		</div>

		<div class="tabbar">
			tabbar
		</div>

		<script src="iscroll/iscroll.js" type="text/javascript" charset="utf-8"></script>

		<script type="text/javascript">
			//参数1: 滚动的容器
			//参数2: 选项配置
			var myScroll = new IScroll(".wrapper", {
				scrollbars: true
			})

			//下拉加载更多演示
			var order = 0;

			var ul = document.querySelector(".wrapper ul")
			myScroll.on("scrollEnd", function() {
				//注：scrollEnd是滚动事件结束未必滚动到底部
				
				//滚动到最底部
				//ajax请求最新的数据, 数据附加在最后
				if(myScroll.maxScrollY == myScroll.y) {
					setTimeout(function() {

						var data = [
							Math.random() * 100,
							Math.random() * 100,
							Math.random() * 100,
							Math.random() * 100,
							Math.random() * 100,
							Math.random() * 100,
						]
						for(var index in data) {

							order++;

							var item = data[index]
							ul.innerHTML += "<li>数据" + order + "  " + item + "</li>"
						}

						myScroll.refresh()

					}, 1000)
				}

			})

			//判断滚动到底部
//			myScroll.on("scrollEnd", function(e) {
//				if(myScroll.maxScrollY == myScroll.y) {
//					console.log("我已滚动到底部");
//				}
//			})
		</script>

	</body>

</html>